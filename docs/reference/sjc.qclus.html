<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute quick cluster analysis — sjc.qclus • sjPlot</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Compute quick cluster analysis — sjc.qclus" />

<meta property="og:description" content="Compute a quick kmeans or hierarchical cluster analysis and displays &quot;cluster characteristics&quot;
               as plot." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sjPlot</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/blackwhitefigures.html">Black &amp; White Figures for Print Journals</a>
    </li>
    <li>
      <a href="../articles/custplot.html">Customize Plot Appearance</a>
    </li>
    <li>
      <a href="../articles/plot_interactions.html">Plotting Interaction Effects of Regression Models</a>
    </li>
    <li>
      <a href="../articles/plot_marginal_effects.html">Plotting Marginal Effects of Regression Models</a>
    </li>
    <li>
      <a href="../articles/plot_model_estimates.html">Plotting Estimates (Fixed Effects) of Regression Models</a>
    </li>
    <li>
      <a href="../articles/sjtitemanalysis.html">Item Analysis of a Scale or an Index</a>
    </li>
    <li>
      <a href="../articles/table_css.html">Customizing HTML tables</a>
    </li>
    <li>
      <a href="../articles/tab_bayes.html">Summary of Baysian Models as HTML Table</a>
    </li>
    <li>
      <a href="../articles/tab_mixed.html">Summary of Mixed Models as HTML Table</a>
    </li>
    <li>
      <a href="../articles/tab_model_estimates.html">Summary of Regression Models as HTML Table</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/strengejacke/sjPlot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute quick cluster analysis</h1>
    <small class="dont-index">Source: <a href='https://github.com/strengejacke/sjPlot/blob/master/R/sjPlotClusterAnalysis.R'><code>R/sjPlotClusterAnalysis.R</code></a></small>
    <div class="hidden name"><code>sjc.qclus.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Compute a quick kmeans or hierarchical cluster analysis and displays "cluster characteristics"
               as plot.</p>
    
    </div>

    <pre class="usage"><span class='fu'>sjc.qclus</span>(<span class='no'>data</span>, <span class='kw'>groupcount</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"kmeans"</span>,
  <span class='st'>"hclust"</span>), <span class='kw'>distance</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"euclidean"</span>, <span class='st'>"maximum"</span>, <span class='st'>"manhattan"</span>, <span class='st'>"canberra"</span>,
  <span class='st'>"binary"</span>, <span class='st'>"minkowski"</span>), <span class='kw'>agglomeration</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"ward"</span>, <span class='st'>"ward.D"</span>, <span class='st'>"ward.D2"</span>,
  <span class='st'>"single"</span>, <span class='st'>"complete"</span>, <span class='st'>"average"</span>, <span class='st'>"mcquitty"</span>, <span class='st'>"median"</span>, <span class='st'>"centroid"</span>),
  <span class='kw'>iter.max</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>algorithm</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"Hartigan-Wong"</span>, <span class='st'>"Lloyd"</span>, <span class='st'>"MacQueen"</span>),
  <span class='kw'>show.accuracy</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>title</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>axis.labels</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>wrap.title</span> <span class='kw'>=</span> <span class='fl'>40</span>, <span class='kw'>wrap.labels</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>wrap.legend.title</span> <span class='kw'>=</span> <span class='fl'>20</span>,
  <span class='kw'>wrap.legend.labels</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>facet.grid</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>geom.colors</span> <span class='kw'>=</span> <span class='st'>"Paired"</span>,
  <span class='kw'>geom.size</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>geom.spacing</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>show.legend</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>show.grpcnt</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>legend.title</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>legend.labels</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>coord.flip</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>reverse.axis</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>prnt.plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame with variables that should be used for the
cluster analysis.</p></td>
    </tr>
    <tr>
      <th>groupcount</th>
      <td><p>Amount of groups (clusters) used for the cluster solution. May also be
a set of initial (distinct) cluster centres, in case <code>method = "kmeans"</code>
(see <code>kmeans</code> for details on <code>centers</code> argument).
If <code>groupcount = NULL</code> and <code>method = "kmeans"</code>, the optimal
amount of clusters is calculated using the gap statistics (see
<code><a href='sjc.kgap.html'>sjc.kgap</a></code>). For <code>method = "hclust"</code>, <code>groupcount</code>
needs to be specified. Following functions may be helpful for estimating
the amount of clusters:</p><ul>
<li><p>Use <code><a href='sjc.elbow.html'>sjc.elbow</a></code> to determine the group-count depending on the elbow-criterion.</p></li>
<li><p>If <code>method = "kmeans"</code>, use <code><a href='sjc.kgap.html'>sjc.kgap</a></code> to determine the group-count according to the gap-statistic.</p></li>
<li><p>If <code>method = "hclust"</code> (hierarchical clustering, default), use <code><a href='sjc.dend.html'>sjc.dend</a></code> to inspect different cluster group solutions.</p></li>
<li><p>Use <code><a href='sjc.grpdisc.html'>sjc.grpdisc</a></code> to inspect the goodness of grouping (accuracy of classification).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>groups</th>
      <td><p>Optional, by default, this argument is <code>NULL</code> and will be
ignored. However, to plot existing cluster groups, specify <code>groupcount</code>
and <code>groups</code>. <code>groups</code> is a vector of same length as
<code>nrow(data)</code> and indicates the group classification of the cluster
analysis. The group classification can be computed with the
<code><a href='sjc.cluster.html'>sjc.cluster</a></code> function. See 'Examples'.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Method for computing the cluster analysis. By default (<code>"kmeans"</code>), a
kmeans cluster analysis will be computed. Use <code>"hclust"</code> to
compute a hierarchical cluster analysis. You can specify the
initial letters only.</p></td>
    </tr>
    <tr>
      <th>distance</th>
      <td><p>Distance measure to be used when <code>method = "hclust"</code> (for hierarchical
clustering). Must be one of <code>"euclidean"</code>, <code>"maximum"</code>, <code>"manhattan"</code>,
<code>"canberra"</code>, <code>"binary"</code> or <code>"minkowski"</code>. See <code>dist</code>.
If is <code>method = "kmeans"</code> this argument will be ignored.</p></td>
    </tr>
    <tr>
      <th>agglomeration</th>
      <td><p>Agglomeration method to be used when <code>method = "hclust"</code> (for hierarchical
clustering). This should be one of <code>"ward"</code>, <code>"single"</code>, <code>"complete"</code>, <code>"average"</code>,
<code>"mcquitty"</code>, <code>"median"</code> or <code>"centroid"</code>. Default is <code>"ward"</code> (see <code>hclust</code>).
If <code>method = "kmeans"</code> this argument will be ignored. See 'Note'.</p></td>
    </tr>
    <tr>
      <th>iter.max</th>
      <td><p>Maximum number of iterations allowed. Only applies, if
<code>method = "kmeans"</code>. See <code>kmeans</code> for details on this argument.</p></td>
    </tr>
    <tr>
      <th>algorithm</th>
      <td><p>Algorithm used for calculating kmeans cluster. Only applies, if
<code>method = "kmeans"</code>. May be one of <code>"Hartigan-Wong"</code> (default),
<code>"Lloyd"</code> (used by SPSS), or <code>"MacQueen"</code>. See <code>kmeans</code>
for details on this argument.</p></td>
    </tr>
    <tr>
      <th>show.accuracy</th>
      <td><p>Logical, if <code>TRUE</code>, the <code><a href='sjc.grpdisc.html'>sjc.grpdisc</a></code> function will be called,
which computes a linear discriminant analysis on the classified cluster groups and plots a
bar graph indicating the goodness of classification for each group.</p></td>
    </tr>
    <tr>
      <th>title</th>
      <td><p>character vector, used as plot title. Depending on plot type and function,
will be set automatically. If <code>title = ""</code>, no title is printed.
For effect-plots, may also be a character vector of length &gt; 1,
to define titles for each sub-plot or facet.</p></td>
    </tr>
    <tr>
      <th>axis.labels</th>
      <td><p>character vector with labels used as axis labels. Optional
argument, since in most cases, axis labels are set automatically.</p></td>
    </tr>
    <tr>
      <th>wrap.title</th>
      <td><p>numeric, determines how many chars of the plot title are displayed in
one line and when a line break is inserted.</p></td>
    </tr>
    <tr>
      <th>wrap.labels</th>
      <td><p>numeric, determines how many chars of the value, variable or axis
labels are displayed in one line and when a line break is inserted.</p></td>
    </tr>
    <tr>
      <th>wrap.legend.title</th>
      <td><p>numeric, determines how many chars of the legend's title
are displayed in one line and when a line break is inserted.</p></td>
    </tr>
    <tr>
      <th>wrap.legend.labels</th>
      <td><p>numeric, determines how many chars of the legend labels are
displayed in one line and when a line break is inserted.</p></td>
    </tr>
    <tr>
      <th>facet.grid</th>
      <td><p><code>TRUE</code> to arrange the lay out of of multiple plots
in a grid of an integrated single plot. This argument calls
<code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></code> or <code><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_grid'>facet_grid</a></code>
to arrange plots. Use <code><a href='plot_grid.html'>plot_grid</a></code> to plot multiple plot-objects
as an arranged grid with <code><a href='http://www.rdocumentation.org/packages/gridExtra/topics/arrangeGrob'>grid.arrange</a></code>.</p></td>
    </tr>
    <tr>
      <th>geom.colors</th>
      <td><p>user defined color for geoms. See 'Details' in <code><a href='sjp.grpfrq.html'>sjp.grpfrq</a></code>.</p></td>
    </tr>
    <tr>
      <th>geom.size</th>
      <td><p>size resp. width of the geoms (bar width, line thickness or point size,
depending on plot type and function). Note that bar and bin widths mostly
need smaller values than dot sizes.</p></td>
    </tr>
    <tr>
      <th>geom.spacing</th>
      <td><p>the spacing between geoms (i.e. bar spacing)</p></td>
    </tr>
    <tr>
      <th>show.legend</th>
      <td><p>logical, if <code>TRUE</code>, and depending on plot type and
function, a legend is added to the plot.</p></td>
    </tr>
    <tr>
      <th>show.grpcnt</th>
      <td><p>Logical, if <code>TRUE</code> (default), the count within each cluster group is added to the
legend labels (e.g. <code>"Group 1 (n=87)"</code>).</p></td>
    </tr>
    <tr>
      <th>legend.title</th>
      <td><p>character vector, used as title for the plot legend.</p></td>
    </tr>
    <tr>
      <th>legend.labels</th>
      <td><p>character vector with labels for the guide/legend.</p></td>
    </tr>
    <tr>
      <th>coord.flip</th>
      <td><p>logical, if <code>TRUE</code>, the x and y axis are swapped.</p></td>
    </tr>
    <tr>
      <th>reverse.axis</th>
      <td><p>Logical, if <code>TRUE</code>, the values on the x-axis are reversed.</p></td>
    </tr>
    <tr>
      <th>prnt.plot</th>
      <td><p>logical, if <code>TRUE</code> (default), plots the results as graph. Use <code>FALSE</code> if you don't
want to plot any graphs. In either case, the ggplot-object will be returned as value.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>(Invisibly) returns an object with</p><ul>
<li><p><code>data</code>: the used data frame for plotting,</p></li>
<li><p><code>plot</code>: the ggplot object,</p></li>
<li><p><code>groupcount</code>: the number of found cluster (as calculated by <code><a href='sjc.kgap.html'>sjc.kgap</a></code>)</p></li>
<li><p><code>classification</code>: the group classification (as calculated by <code><a href='sjc.cluster.html'>sjc.cluster</a></code>), including missing values, so this vector can be appended to the original data frame.</p></li>
<li><p><code>accuracy</code>: the accuracy of group classification (as calculated by <code><a href='sjc.grpdisc.html'>sjc.grpdisc</a></code>).</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Following steps are computed in this function:</p><ol>
<li><p>If <code>method = "kmeans"</code>, this function first determines the optimal group count via gap statistics (unless argument <code>groupcount</code> is specified), using the <code><a href='sjc.kgap.html'>sjc.kgap</a></code> function.</p></li>
<li><p>A cluster analysis is performed by running the <code><a href='sjc.cluster.html'>sjc.cluster</a></code> function to determine the cluster groups.</p></li>
<li><p>Then, all variables in <code>data</code> are scaled and centered. The mean value of these z-scores within each cluster group is calculated to see how certain characteristics (variables) in a cluster group differ in relation to other cluster groups.</p></li>
<li><p>These results are plotted as graph.</p></li>
</ol><p>This method can also be used to plot existing cluster solution as graph witouth computing
         a new cluster analysis. See argument <code>groups</code> for more details.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>See 'Note' in <code><a href='sjc.cluster.html'>sjc.cluster</a></code></p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Maechler M, Rousseeuw P, Struyf A, Hubert M, Hornik K (2014) cluster: Cluster Analysis Basics and Extensions. R package.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># k-means clustering of mtcars-dataset</span>
<span class='fu'>sjc.qclus</span>(<span class='no'>mtcars</span>)

<span class='co'># k-means clustering of mtcars-dataset with 4 pre-defined</span>
<span class='co'># groups in a faceted panel</span>
<span class='fu'>sjc.qclus</span>(<span class='no'>airquality</span>, <span class='kw'>groupcount</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>facet.grid</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># k-means clustering of airquality data</span>
<span class='co'># and saving the results. most likely, 3 cluster</span>
<span class='co'># groups have been found (see below).</span>
<span class='no'>airgrp</span> <span class='kw'>&lt;-</span> <span class='fu'>sjc.qclus</span>(<span class='no'>airquality</span>)</div><div class='output co'>#&gt; <span class='message'>Clustering Gap statistic ["clusGap"].</span>
#&gt; <span class='message'>B=100 simulated reference sets, k = 1..10</span></div><div class='output co'>#&gt; <span class='message'> --&gt; Number of clusters (method 'Tibs2001SEmax', SE.factor=1): 3</span></div><div class='img'><img src='sjc.qclus-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># "re-plot" cluster groups, without computing</span>
<span class='co'># new k-means cluster analysis.</span>
<span class='fu'>sjc.qclus</span>(<span class='no'>airquality</span>, <span class='kw'>groupcount</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>groups</span> <span class='kw'>=</span> <span class='no'>airgrp</span>$<span class='no'>classification</span>)</div><div class='img'><img src='sjc.qclus-2.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Daniel Lüdecke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

