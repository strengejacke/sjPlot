<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot stacked proportional bars — plot_stackfrq • sjPlot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot stacked proportional bars — plot_stackfrq"><meta name="description" content="Plot items (variables) of a scale as stacked proportional bars. This
               function is useful when several items with identical scale/categoroies
               should be plotted to compare the distribution of answers."><meta property="og:description" content="Plot items (variables) of a scale as stacked proportional bars. This
               function is useful when several items with identical scale/categoroies
               should be plotted to compare the distribution of answers."><meta property="og:image" content="https://strengejacke.github.io/sjPlot/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sjPlot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.8.16.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-regression-tables" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Regression Tables</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-regression-tables"><li><a class="dropdown-item" href="../articles/tab_model_estimates.html">Classical Regression Models as HTML Table</a></li>
    <li><a class="dropdown-item" href="../articles/tab_mixed.html">Mixed Models as HTML Table</a></li>
    <li><a class="dropdown-item" href="../articles/tab_bayes.html">Bayesian Models as HTML Table</a></li>
    <li><a class="dropdown-item" href="../articles/tab_model_robust.html">Robust Estimation of Standard Errors, Confidence Intervals and p-values</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-regression-plots" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Regression Plots</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-regression-plots"><li><a class="dropdown-item" href="../articles/plot_model_estimates.html">Plotting Regression Coefficients</a></li>
    <li><a class="dropdown-item" href="../articles/plot_marginal_effects.html">Plotting Marginal Effects</a></li>
    <li><a class="dropdown-item" href="../articles/plot_interactions.html">Plotting Marginal Effects of Interactions</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-plot-and-table-customization" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Plot and Table Customization</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-plot-and-table-customization"><li><a class="dropdown-item" href="../articles/blackwhitefigures.html">Creating Black and White Figures</a></li>
    <li><a class="dropdown-item" href="../articles/custplot.html">Customize Plot Appearance</a></li>
    <li><a class="dropdown-item" href="../articles/table_css.html">Customize Table Appearance</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-other-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Other Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-other-articles"><li><a class="dropdown-item" href="../articles/sjtitemanalysis.html">Item Analysis of a Scale or an Index</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/strengejacke/sjPlot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot stacked proportional bars</h1>
      <small class="dont-index">Source: <a href="https://github.com/strengejacke/sjPlot/blob/master/R/plot_stackfrq.R" class="external-link"><code>R/plot_stackfrq.R</code></a></small>
      <div class="d-none name"><code>plot_stackfrq.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Plot items (variables) of a scale as stacked proportional bars. This
               function is useful when several items with identical scale/categoroies
               should be plotted to compare the distribution of answers.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_stackfrq</span><span class="op">(</span></span>
<span>  <span class="va">items</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend.labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  axis.titles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  axis.labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weight.by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sort.frq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wrap.title <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  wrap.labels <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  wrap.legend.title <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  wrap.legend.labels <span class="op">=</span> <span class="fl">28</span>,</span>
<span>  geom.size <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  geom.colors <span class="op">=</span> <span class="st">"Blues"</span>,</span>
<span>  show.prc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show.n <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show.total <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show.axis.prc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show.legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  grid.breaks <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  expand.grid <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vjust <span class="op">=</span> <span class="st">"center"</span>,</span>
<span>  coord.flip <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-items">items<a class="anchor" aria-label="anchor" href="#arg-items"></a></dt>
<dd><p>Data frame, or a grouped data frame, with each column representing one item.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>character vector, used as plot title. Depending on plot type and function,
will be set automatically. If <code>title = ""</code>, no title is printed.
For effect-plots, may also be a character vector of length &gt; 1,
to define titles for each sub-plot or facet.</p></dd>


<dt id="arg-legend-title">legend.title<a class="anchor" aria-label="anchor" href="#arg-legend-title"></a></dt>
<dd><p>character vector, used as title for the plot legend.</p></dd>


<dt id="arg-legend-labels">legend.labels<a class="anchor" aria-label="anchor" href="#arg-legend-labels"></a></dt>
<dd><p>character vector with labels for the guide/legend.</p></dd>


<dt id="arg-axis-titles">axis.titles<a class="anchor" aria-label="anchor" href="#arg-axis-titles"></a></dt>
<dd><p>character vector of length one or two, defining the title(s)
for the x-axis and y-axis.</p></dd>


<dt id="arg-axis-labels">axis.labels<a class="anchor" aria-label="anchor" href="#arg-axis-labels"></a></dt>
<dd><p>character vector with labels used as axis labels. Optional
argument, since in most cases, axis labels are set automatically.</p></dd>


<dt id="arg-weight-by">weight.by<a class="anchor" aria-label="anchor" href="#arg-weight-by"></a></dt>
<dd><p>Vector of weights that will be applied to weight all cases.
Must be a vector of same length as the input vector. Default is
<code>NULL</code>, so no weights are used.</p></dd>


<dt id="arg-sort-frq">sort.frq<a class="anchor" aria-label="anchor" href="#arg-sort-frq"></a></dt>
<dd><p>Indicates whether the <code>items</code> should be ordered by
by highest count of first or last category of <code>items</code>.</p><dl><dt><code>"first.asc"</code></dt>
<dd><p>to order ascending by lowest count of first category,</p></dd>

  <dt><code>"first.desc"</code></dt>
<dd><p>to order descending by lowest count of first category,</p></dd>

  <dt><code>"last.asc"</code></dt>
<dd><p>to order ascending by lowest count of last category,</p></dd>

  <dt><code>"last.desc"</code></dt>
<dd><p>to order descending by lowest count of last category,</p></dd>

  <dt><code>NULL</code></dt>
<dd><p>(default) for no sorting.</p></dd>


</dl></dd>


<dt id="arg-wrap-title">wrap.title<a class="anchor" aria-label="anchor" href="#arg-wrap-title"></a></dt>
<dd><p>numeric, determines how many chars of the plot title are displayed in
one line and when a line break is inserted.</p></dd>


<dt id="arg-wrap-labels">wrap.labels<a class="anchor" aria-label="anchor" href="#arg-wrap-labels"></a></dt>
<dd><p>numeric, determines how many chars of the value, variable or axis
labels are displayed in one line and when a line break is inserted.</p></dd>


<dt id="arg-wrap-legend-title">wrap.legend.title<a class="anchor" aria-label="anchor" href="#arg-wrap-legend-title"></a></dt>
<dd><p>numeric, determines how many chars of the legend's title
are displayed in one line and when a line break is inserted.</p></dd>


<dt id="arg-wrap-legend-labels">wrap.legend.labels<a class="anchor" aria-label="anchor" href="#arg-wrap-legend-labels"></a></dt>
<dd><p>numeric, determines how many chars of the legend labels are
displayed in one line and when a line break is inserted.</p></dd>


<dt id="arg-geom-size">geom.size<a class="anchor" aria-label="anchor" href="#arg-geom-size"></a></dt>
<dd><p>size resp. width of the geoms (bar width, line thickness or point size,
depending on plot type and function). Note that bar and bin widths mostly
need smaller values than dot sizes.</p></dd>


<dt id="arg-geom-colors">geom.colors<a class="anchor" aria-label="anchor" href="#arg-geom-colors"></a></dt>
<dd><p>user defined color for geoms. See 'Details' in <code><a href="plot_grpfrq.html">plot_grpfrq</a></code>.</p></dd>


<dt id="arg-show-prc">show.prc<a class="anchor" aria-label="anchor" href="#arg-show-prc"></a></dt>
<dd><p>Logical, whether percentage values should be plotted or not.</p></dd>


<dt id="arg-show-n">show.n<a class="anchor" aria-label="anchor" href="#arg-show-n"></a></dt>
<dd><p>Logical, whether count values hould be plotted or not.</p></dd>


<dt id="arg-show-total">show.total<a class="anchor" aria-label="anchor" href="#arg-show-total"></a></dt>
<dd><p>logical, if <code>TRUE</code>, adds total number of cases for each
group or category to the labels.</p></dd>


<dt id="arg-show-axis-prc">show.axis.prc<a class="anchor" aria-label="anchor" href="#arg-show-axis-prc"></a></dt>
<dd><p>Logical, if <code>TRUE</code> (default), the percentage values at the x-axis are shown.</p></dd>


<dt id="arg-show-legend">show.legend<a class="anchor" aria-label="anchor" href="#arg-show-legend"></a></dt>
<dd><p>logical, if <code>TRUE</code>, and depending on plot type and
function, a legend is added to the plot.</p></dd>


<dt id="arg-grid-breaks">grid.breaks<a class="anchor" aria-label="anchor" href="#arg-grid-breaks"></a></dt>
<dd><p>numeric; sets the distance between breaks for the axis,
i.e. at every <code>grid.breaks</code>'th position a major grid is being printed.</p></dd>


<dt id="arg-expand-grid">expand.grid<a class="anchor" aria-label="anchor" href="#arg-expand-grid"></a></dt>
<dd><p>logical, if <code>TRUE</code>, the plot grid is expanded, i.e. there is a small margin between
axes and plotting region. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>Numeric, amount of digits after decimal point when rounding
estimates or values.</p></dd>


<dt id="arg-vjust">vjust<a class="anchor" aria-label="anchor" href="#arg-vjust"></a></dt>
<dd><p>character vector, indicating the vertical position of value
labels. Allowed are same values as for <code>vjust</code> aesthetics from
<code>ggplot2</code>: "left", "center", "right", "bottom", "middle", "top" and
new options like "inward" and "outward", which align text towards and
away from the center of the plot respectively.</p></dd>


<dt id="arg-coord-flip">coord.flip<a class="anchor" aria-label="anchor" href="#arg-coord-flip"></a></dt>
<dd><p>logical, if <code>TRUE</code>, the x and y axis are swapped.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A ggplot-object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Data from the EUROFAMCARE sample dataset</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://strengejacke.github.io/sjmisc/" class="external-link">sjmisc</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">efc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># recveive first item of COPE-index scale</span></span></span>
<span class="r-in"><span><span class="va">start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">efc</span><span class="op">)</span> <span class="op">==</span> <span class="st">"c82cop1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># recveive first item of COPE-index scale</span></span></span>
<span class="r-in"><span><span class="va">end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">efc</span><span class="op">)</span> <span class="op">==</span> <span class="st">"c90cop9"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># auto-detection of labels</span></span></span>
<span class="r-in"><span><span class="fu">plot_stackfrq</span><span class="op">(</span><span class="va">efc</span><span class="op">[</span>, <span class="va">start</span><span class="op">:</span><span class="va">end</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="plot_stackfrq-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># works on grouped data frames as well</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">efc</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">c161sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">start</span><span class="op">:</span><span class="va">end</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">plot_stackfrq</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Using an external vector in selections was deprecated in tidyselect 1.1.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Please use `all_of()` or `any_of()` instead.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   # Was:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data %&gt;% select(start)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   # Now:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data %&gt;% select(all_of(start))</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Using an external vector in selections was deprecated in tidyselect 1.1.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Please use `all_of()` or `any_of()` instead.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   # Was:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data %&gt;% select(end)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   # Now:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   data %&gt;% select(all_of(end))</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding missing grouping variables: `c161sex`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]][[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]][[2]]</span>
<span class="r-plt img"><img src="plot_stackfrq-2.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-plt img"><img src="plot_stackfrq-3.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

